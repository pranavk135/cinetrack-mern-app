{"ast":null,"code":"// frontend/src/utils/api.js\nimport axios from \"axios\";\n\n// ✅ Use one consistent base URL (your backend)\nconst API_BASE = \"http://localhost:5000\";\n\n// ✅ Centralized Axios instance (handles baseURL and JSON headers)\nconst axiosInstance = axios.create({\n  baseURL: API_BASE,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// ✅ Automatically attach token if present\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"ct_token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// --- ✅ Generic API Wrappers ---\n\nexport async function apiGet(url, token) {\n  try {\n    const headers = token ? {\n      Authorization: `Bearer ${token}`\n    } : {};\n    const res = await axiosInstance.get(url, {\n      headers\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response;\n    console.error(`GET ${url} failed:`, ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err);\n    throw err;\n  }\n}\nexport async function apiPost(url, token, body) {\n  try {\n    const headers = token ? {\n      Authorization: `Bearer ${token}`\n    } : {};\n    const res = await axiosInstance.post(url, body, {\n      headers\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response2;\n    console.error(`POST ${url} failed:`, ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err);\n    throw err;\n  }\n}\nexport async function apiPut(url, token, body) {\n  try {\n    const headers = token ? {\n      Authorization: `Bearer ${token}`\n    } : {};\n    const res = await axiosInstance.put(url, body, {\n      headers\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response3;\n    console.error(`PUT ${url} failed:`, ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data) || err);\n    throw err;\n  }\n}\nexport async function apiDelete(url, token) {\n  try {\n    const headers = token ? {\n      Authorization: `Bearer ${token}`\n    } : {};\n    const res = await axiosInstance.delete(url, {\n      headers\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response4;\n    console.error(`DELETE ${url} failed:`, ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data) || err);\n    throw err;\n  }\n}","map":{"version":3,"names":["axios","API_BASE","axiosInstance","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","apiGet","url","res","get","data","err","_err$response","console","error","response","apiPost","body","post","_err$response2","apiPut","put","_err$response3","apiDelete","delete","_err$response4"],"sources":["C:/practice_programs/wt/cinetrack/frontend/src/utils/api.js"],"sourcesContent":["// frontend/src/utils/api.js\nimport axios from \"axios\";\n\n// ✅ Use one consistent base URL (your backend)\nconst API_BASE = \"http://localhost:5000\";\n\n// ✅ Centralized Axios instance (handles baseURL and JSON headers)\nconst axiosInstance = axios.create({\n  baseURL: API_BASE,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// ✅ Automatically attach token if present\naxiosInstance.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"ct_token\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n\n// --- ✅ Generic API Wrappers ---\n\nexport async function apiGet(url, token) {\n  try {\n    const headers = token ? { Authorization: `Bearer ${token}` } : {};\n    const res = await axiosInstance.get(url, { headers });\n    return res.data;\n  } catch (err) {\n    console.error(`GET ${url} failed:`, err.response?.data || err);\n    throw err;\n  }\n}\n\nexport async function apiPost(url, token, body) {\n  try {\n    const headers = token ? { Authorization: `Bearer ${token}` } : {};\n    const res = await axiosInstance.post(url, body, { headers });\n    return res.data;\n  } catch (err) {\n    console.error(`POST ${url} failed:`, err.response?.data || err);\n    throw err;\n  }\n}\n\nexport async function apiPut(url, token, body) {\n  try {\n    const headers = token ? { Authorization: `Bearer ${token}` } : {};\n    const res = await axiosInstance.put(url, body, { headers });\n    return res.data;\n  } catch (err) {\n    console.error(`PUT ${url} failed:`, err.response?.data || err);\n    throw err;\n  }\n}\n\nexport async function apiDelete(url, token) {\n  try {\n    const headers = token ? { Authorization: `Bearer ${token}` } : {};\n    const res = await axiosInstance.delete(url, { headers });\n    return res.data;\n  } catch (err) {\n    console.error(`DELETE ${url} failed:`, err.response?.data || err);\n    throw err;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}